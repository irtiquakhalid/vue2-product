<template>
  <div class="team-profile">
    <loadercomponent :loader="loader" />
    <div class="d-flex flex-column justify-space-between h-100">
      <div>
        <v-row>
          <v-col cols="12" md="5">
            <div class="d-flex align-center">
              <router-link to="/team">
                <v-icon style="color: var(--primary-color); font-size: 45px"
                  >mdi-arrow-left-box</v-icon
                >
              </router-link>
              <h2
                class="ml-5 handler-text-overflow"
                style="width: 87% !important; text-align: start !important"
              >
                {{ teamName }}
              </h2>
            </div>
          </v-col>
          <v-col
            cols="12"
            md="7"
            class="d-flex align-center"
            v-if="members.length > 0 || search"
          >
            <v-select
              flat
              solo
              background-color="var(--secondary-color)"
              class="radius-7 sorting mr-3 custom-select-small"
              hide-details
              append-icon="mdi-chevron-down"
              v-model="sorting.sortDirection"
              :items="['Ascending', 'Descending']"
            >
            </v-select>
            <v-text-field
              solo
              flat
              background-color="var(--secondary-color)"
              class="radius-7"
              hide-details
              v-model="search"
              @input="fetchdata"
              placeholder="Search member"
            >
              <template v-slot:prepend-inner>
                <v-img src="/images/search.svg" class="px-3" contain></v-img>
              </template>
            </v-text-field>
          </v-col>
        </v-row>

        <v-row
          class="mt-5"
          justify-xs="center"
          justify-sm="start"
          v-if="members.length > 0"
        >
          <v-col
            v-for="(value, index) in members"
            :key="index"
            cols="12"
            sm="6"
            md="4"
            lg="3"
            class="position-relative"
          >
            <div class="special-role">
              <v-icon
                style="color: var(--primary-color)"
                v-if="checkIfAdmin(value)"
                size="24"
                >mdi-crown</v-icon
              >
              <v-icon
                style="color: var(--primary-color)"
                v-if="checkIfTL(value)"
                size="20"
                >mdi-chess-rook</v-icon
              >
            </div>
            <div
              class="dots-menu d-flex align-center"
              :class="
                checkIfTL(value) || checkIfAdmin(value)
                  ? 'justify-space-between'
                  : 'justify-end'
              "
            >
              <v-menu
                left
                offset-y
                max-width="150"
                v-if="
                  getRolePermissions == 'admin' || getRolePermissions == 'own'
                "
              >
                <template v-slot:activator="{ on, attrs }">
                  <v-icon
                    color="var(--primary-color)"
                    v-bind="attrs"
                    v-on="on"
                    style="font-size: 30px"
                    >mdi-dots-horizontal-circle</v-icon
                  >
                </template>
                <v-list class="pa-0">
                  <v-list-item class="px-2">
                    <v-list-item-title
                      class="aliceblue--text text-start font-weight-600 cursor-pointer"
                      @click="editItem(value)"
                    >
                      <div class="d-flex align-center">
                        <v-icon
                          class="pr-2"
                          style="font-size: 20px; color: var(--primary-color)"
                          >mdi-square-edit-outline</v-icon
                        >
                        <span style="color: var(--primary-color)">Edit</span>
                      </div>
                    </v-list-item-title>
                  </v-list-item>
                  <v-list-item class="px-2" @click="detailItem(value)">
                    <v-list-item-title
                      class="aliceblue--text font-weight-600 cursor-pointer"
                    >
                      <div class="d-flex align-center">
                        <v-icon
                          class="pr-2"
                          style="font-size: 20px; color: var(--primary-color)"
                          >mdi-eye-outline</v-icon
                        >
                        <span style="color: var(--primary-color)"
                          >View Details</span
                        >
                      </div>
                    </v-list-item-title>
                  </v-list-item>
                  <v-list-item
                    class="px-2"
                    @click="changeRole(value)"
                    v-if="!checkIfTL(value)"
                  >
                    <v-list-item-title
                      class="aliceblue--text font-weight-600 cursor-pointer"
                    >
                      <div class="d-flex align-center">
                        <v-icon
                          class="pr-2"
                          style="font-size: 20px; color: var(--primary-color)"
                          >mdi-account-edit</v-icon
                        >
                        <span style="color: var(--primary-color)"
                          >Change Role</span
                        >
                      </div>
                    </v-list-item-title>
                  </v-list-item>
                  <v-list-item class="px-2" @click="deleteItem(value)">
                    <v-list-item-title class="font-weight-600 cursor-pointer">
                      <div class="d-flex align-center">
                        <v-icon
                          class="pr-2"
                          style="font-size: 20px; color: var(--primary-color)"
                          >mdi-delete-outline</v-icon
                        >
                        <span style="color: var(--primary-color)">Delete</span>
                      </div>
                    </v-list-item-title>
                  </v-list-item>
                </v-list>
              </v-menu>
            </div>
            <v-card
              width="350"
              color="var(--secondary-color)"
              style="margin: 0.1rem 0"
              class="pt-3 pb-3 px-2 radius-21"
              flat
              min-height="240"
            >
              <div class="d-flex flex-column justify-center align-center">
                <div
                  class="card-image position-relative"
                  style="margin-top: 8px"
                >
                  <v-avatar size="100%" v-if="value.userProfile">
                    <v-img :src="`${imageURL}${value.userProfile}`"></v-img>
                  </v-avatar>
                  <v-avatar v-else>
                    <v-img src="/images/singleuser.png"></v-img>
                  </v-avatar>
                  <v-chip
                    label
                    class="white--text"
                    :color="'var(--primary-color)'"
                    >Active</v-chip
                  >
                </div>
                <h5
                  class="text-center font-weight-600 cyan-text mt-2 handler-text-overflow"
                >
                  {{ value.name ? value.name : "\u00A0" }}
                </h5>
                <h6
                  class="text-center font-weight-500 grey-text-200 font-16 handler-text-overflow"
                  style="width: 80% !important"
                >
                  {{ value.email ? value.email : "\u00A0" }}
                </h6>
              </div>
              <!-- Role items will be displayed with the sliding effect -->
              <carousel-3d
                :key="carouselKey"
                style="background: transparent !important"
                width="100%"
                :height="20"
                :display="1"
                :autoplay="true"
                :perspective="180"
                :controls-visible="true"
                :autoplay-timeout="2500"
              >
                <slide
                  class="font-weight-600 w-100 d-flex justify-center align-center"
                  v-for="(item, index) in value.roles"
                  :index="index"
                  :key="item.id"
                >
                  <div>
                    <v-chip
                      style="
                        position: relative !important;
                        top: 0 !important;
                        height: 20px !important;
                      "
                      class="d-flex justify-center white--text font-weight-500 mx-0 px-3"
                      label
                      color="var(--primary-color)"
                      >{{ item.roleName }}</v-chip
                    >
                  </div>
                </slide>
              </carousel-3d>
            </v-card>
          </v-col>
        </v-row>
        <div
          class="default-view"
          v-if="members.length === 0 && !search && loader == false"
        >
          <svg
            width="422"
            height="306"
            viewBox="0 0 562 306"
            fill="none"
            xmlns="http://www.w3.org/2000/svg"
          >
            <path
              d="M156.6 291.928C156.693 292.186 156.74 292.396 156.74 292.561C156.752 292.713 156.711 292.83 156.617 292.912C156.523 292.994 156.365 293.047 156.143 293.07C155.932 293.094 155.645 293.105 155.281 293.105C154.918 293.105 154.625 293.094 154.402 293.07C154.191 293.059 154.027 293.035 153.91 293C153.805 292.953 153.723 292.895 153.664 292.824C153.617 292.754 153.57 292.666 153.523 292.561L151.572 287.023H142.115L140.252 292.49C140.217 292.596 140.17 292.689 140.111 292.771C140.053 292.842 139.965 292.906 139.848 292.965C139.742 293.012 139.584 293.047 139.373 293.07C139.174 293.094 138.91 293.105 138.582 293.105C138.242 293.105 137.961 293.088 137.738 293.053C137.527 293.029 137.375 292.977 137.281 292.895C137.199 292.812 137.158 292.695 137.158 292.543C137.17 292.379 137.223 292.168 137.316 291.91L144.945 270.781C144.992 270.652 145.051 270.547 145.121 270.465C145.203 270.383 145.314 270.318 145.455 270.271C145.607 270.225 145.795 270.195 146.018 270.184C146.252 270.16 146.545 270.148 146.896 270.148C147.271 270.148 147.582 270.16 147.828 270.184C148.074 270.195 148.273 270.225 148.426 270.271C148.578 270.318 148.695 270.389 148.777 270.482C148.859 270.564 148.924 270.67 148.971 270.799L156.6 291.928ZM146.809 273.277H146.791L142.871 284.615H150.781L146.809 273.277ZM173.633 292.561C173.633 292.654 173.609 292.736 173.562 292.807C173.527 292.877 173.457 292.936 173.352 292.982C173.258 293.018 173.129 293.047 172.965 293.07C172.801 293.094 172.602 293.105 172.367 293.105C172.121 293.105 171.916 293.094 171.752 293.07C171.588 293.047 171.453 293.018 171.348 292.982C171.242 292.936 171.166 292.877 171.119 292.807C171.072 292.736 171.049 292.654 171.049 292.561V290.469C170.217 291.371 169.35 292.074 168.447 292.578C167.557 293.082 166.578 293.334 165.512 293.334C164.352 293.334 163.361 293.111 162.541 292.666C161.721 292.209 161.053 291.6 160.537 290.838C160.033 290.064 159.664 289.162 159.43 288.131C159.195 287.088 159.078 285.992 159.078 284.844C159.078 283.484 159.225 282.26 159.518 281.17C159.811 280.068 160.244 279.131 160.818 278.357C161.393 277.584 162.102 276.992 162.945 276.582C163.801 276.16 164.785 275.949 165.898 275.949C166.824 275.949 167.668 276.154 168.43 276.564C169.203 276.963 169.965 277.555 170.715 278.34V269.146C170.715 269.064 170.732 268.988 170.768 268.918C170.814 268.836 170.896 268.777 171.014 268.742C171.131 268.695 171.277 268.66 171.453 268.637C171.641 268.602 171.875 268.584 172.156 268.584C172.449 268.584 172.689 268.602 172.877 268.637C173.064 268.66 173.211 268.695 173.316 268.742C173.422 268.777 173.498 268.836 173.545 268.918C173.604 268.988 173.633 269.064 173.633 269.146V292.561ZM170.715 281.434C169.93 280.461 169.168 279.723 168.43 279.219C167.703 278.703 166.941 278.445 166.145 278.445C165.406 278.445 164.779 278.621 164.264 278.973C163.748 279.324 163.326 279.787 162.998 280.361C162.682 280.936 162.447 281.586 162.295 282.312C162.154 283.039 162.084 283.777 162.084 284.527C162.084 285.324 162.143 286.104 162.26 286.865C162.389 287.627 162.605 288.307 162.91 288.904C163.215 289.49 163.619 289.965 164.123 290.328C164.627 290.68 165.26 290.855 166.021 290.855C166.408 290.855 166.777 290.803 167.129 290.697C167.492 290.592 167.861 290.416 168.236 290.17C168.611 289.924 169.004 289.607 169.414 289.221C169.824 288.822 170.258 288.336 170.715 287.762V281.434ZM192.547 292.561C192.547 292.654 192.523 292.736 192.477 292.807C192.441 292.877 192.371 292.936 192.266 292.982C192.172 293.018 192.043 293.047 191.879 293.07C191.715 293.094 191.516 293.105 191.281 293.105C191.035 293.105 190.83 293.094 190.666 293.07C190.502 293.047 190.367 293.018 190.262 292.982C190.156 292.936 190.08 292.877 190.033 292.807C189.986 292.736 189.963 292.654 189.963 292.561V290.469C189.131 291.371 188.264 292.074 187.361 292.578C186.471 293.082 185.492 293.334 184.426 293.334C183.266 293.334 182.275 293.111 181.455 292.666C180.635 292.209 179.967 291.6 179.451 290.838C178.947 290.064 178.578 289.162 178.344 288.131C178.109 287.088 177.992 285.992 177.992 284.844C177.992 283.484 178.139 282.26 178.432 281.17C178.725 280.068 179.158 279.131 179.732 278.357C180.307 277.584 181.016 276.992 181.859 276.582C182.715 276.16 183.699 275.949 184.812 275.949C185.738 275.949 186.582 276.154 187.344 276.564C188.117 276.963 188.879 277.555 189.629 278.34V269.146C189.629 269.064 189.646 268.988 189.682 268.918C189.729 268.836 189.811 268.777 189.928 268.742C190.045 268.695 190.191 268.66 190.367 268.637C190.555 268.602 190.789 268.584 191.07 268.584C191.363 268.584 191.604 268.602 191.791 268.637C191.979 268.66 192.125 268.695 192.23 268.742C192.336 268.777 192.412 268.836 192.459 268.918C192.518 268.988 192.547 269.064 192.547 269.146V292.561ZM189.629 281.434C188.844 280.461 188.082 279.723 187.344 279.219C186.617 278.703 185.855 278.445 185.059 278.445C184.32 278.445 183.693 278.621 183.178 278.973C182.662 279.324 182.24 279.787 181.912 280.361C181.596 280.936 181.361 281.586 181.209 282.312C181.068 283.039 180.998 283.777 180.998 284.527C180.998 285.324 181.057 286.104 181.174 286.865C181.303 287.627 181.52 288.307 181.824 288.904C182.129 289.49 182.533 289.965 183.037 290.328C183.541 290.68 184.174 290.855 184.936 290.855C185.322 290.855 185.691 290.803 186.043 290.697C186.406 290.592 186.775 290.416 187.15 290.17C187.525 289.924 187.918 289.607 188.328 289.221C188.738 288.822 189.172 288.336 189.629 287.762V281.434ZM214.291 291.4C214.291 291.74 214.268 292.01 214.221 292.209C214.174 292.408 214.104 292.555 214.01 292.648C213.916 292.742 213.775 292.83 213.588 292.912C213.4 292.994 213.184 293.059 212.938 293.105C212.703 293.164 212.451 293.211 212.182 293.246C211.912 293.281 211.643 293.299 211.373 293.299C210.553 293.299 209.85 293.193 209.264 292.982C208.678 292.76 208.197 292.432 207.822 291.998C207.447 291.553 207.172 290.996 206.996 290.328C206.832 289.648 206.75 288.852 206.75 287.938V278.691H204.535C204.359 278.691 204.219 278.598 204.113 278.41C204.008 278.223 203.955 277.918 203.955 277.496C203.955 277.273 203.967 277.086 203.99 276.934C204.025 276.781 204.066 276.658 204.113 276.564C204.16 276.459 204.219 276.389 204.289 276.354C204.371 276.307 204.459 276.283 204.553 276.283H206.75V272.521C206.75 272.439 206.768 272.363 206.803 272.293C206.85 272.223 206.926 272.164 207.031 272.117C207.148 272.059 207.301 272.018 207.488 271.994C207.676 271.971 207.91 271.959 208.191 271.959C208.484 271.959 208.725 271.971 208.912 271.994C209.1 272.018 209.246 272.059 209.352 272.117C209.457 272.164 209.533 272.223 209.58 272.293C209.627 272.363 209.65 272.439 209.65 272.521V276.283H213.711C213.805 276.283 213.887 276.307 213.957 276.354C214.027 276.389 214.086 276.459 214.133 276.564C214.191 276.658 214.232 276.781 214.256 276.934C214.279 277.086 214.291 277.273 214.291 277.496C214.291 277.918 214.238 278.223 214.133 278.41C214.027 278.598 213.887 278.691 213.711 278.691H209.65V287.516C209.65 288.605 209.809 289.432 210.125 289.994C210.453 290.545 211.033 290.82 211.865 290.82C212.135 290.82 212.375 290.797 212.586 290.75C212.797 290.691 212.984 290.633 213.148 290.574C213.312 290.516 213.453 290.463 213.57 290.416C213.688 290.357 213.793 290.328 213.887 290.328C213.945 290.328 213.998 290.346 214.045 290.381C214.104 290.404 214.145 290.457 214.168 290.539C214.203 290.621 214.232 290.732 214.256 290.873C214.279 291.014 214.291 291.189 214.291 291.4ZM231.236 283.965C231.236 284.422 231.119 284.75 230.885 284.949C230.662 285.137 230.404 285.23 230.111 285.23H219.74C219.74 286.109 219.828 286.9 220.004 287.604C220.18 288.307 220.473 288.91 220.883 289.414C221.293 289.918 221.826 290.305 222.482 290.574C223.139 290.844 223.941 290.979 224.891 290.979C225.641 290.979 226.309 290.92 226.895 290.803C227.48 290.674 227.984 290.533 228.406 290.381C228.84 290.229 229.191 290.094 229.461 289.977C229.742 289.848 229.953 289.783 230.094 289.783C230.176 289.783 230.246 289.807 230.305 289.854C230.375 289.889 230.428 289.947 230.463 290.029C230.498 290.111 230.521 290.229 230.533 290.381C230.557 290.521 230.568 290.697 230.568 290.908C230.568 291.061 230.562 291.195 230.551 291.312C230.539 291.418 230.521 291.518 230.498 291.611C230.486 291.693 230.457 291.77 230.41 291.84C230.375 291.91 230.322 291.98 230.252 292.051C230.193 292.109 230.006 292.215 229.689 292.367C229.373 292.508 228.963 292.648 228.459 292.789C227.955 292.93 227.369 293.053 226.701 293.158C226.045 293.275 225.342 293.334 224.592 293.334C223.291 293.334 222.148 293.152 221.164 292.789C220.191 292.426 219.371 291.887 218.703 291.172C218.035 290.457 217.531 289.561 217.191 288.482C216.852 287.404 216.682 286.15 216.682 284.721C216.682 283.361 216.857 282.143 217.209 281.064C217.561 279.975 218.064 279.055 218.721 278.305C219.389 277.543 220.191 276.963 221.129 276.564C222.066 276.154 223.115 275.949 224.275 275.949C225.518 275.949 226.572 276.148 227.439 276.547C228.318 276.945 229.039 277.484 229.602 278.164C230.164 278.832 230.574 279.623 230.832 280.537C231.102 281.439 231.236 282.406 231.236 283.438V283.965ZM228.318 283.104C228.354 281.58 228.014 280.385 227.299 279.518C226.596 278.65 225.547 278.217 224.152 278.217C223.438 278.217 222.811 278.352 222.271 278.621C221.732 278.891 221.281 279.248 220.918 279.693C220.555 280.139 220.273 280.66 220.074 281.258C219.875 281.844 219.764 282.459 219.74 283.104H228.318ZM247.584 292.578C247.584 292.719 247.537 292.824 247.443 292.895C247.35 292.965 247.221 293.018 247.057 293.053C246.893 293.088 246.652 293.105 246.336 293.105C246.031 293.105 245.785 293.088 245.598 293.053C245.422 293.018 245.293 292.965 245.211 292.895C245.129 292.824 245.088 292.719 245.088 292.578V290.996C244.396 291.734 243.623 292.309 242.768 292.719C241.924 293.129 241.027 293.334 240.078 293.334C239.246 293.334 238.49 293.223 237.811 293C237.143 292.789 236.568 292.479 236.088 292.068C235.619 291.658 235.25 291.154 234.98 290.557C234.723 289.959 234.594 289.279 234.594 288.518C234.594 287.627 234.775 286.854 235.139 286.197C235.502 285.541 236.023 284.996 236.703 284.562C237.383 284.129 238.215 283.807 239.199 283.596C240.184 283.373 241.291 283.262 242.521 283.262H244.701V282.031C244.701 281.422 244.637 280.883 244.508 280.414C244.379 279.945 244.168 279.559 243.875 279.254C243.594 278.938 243.225 278.703 242.768 278.551C242.311 278.387 241.748 278.305 241.08 278.305C240.365 278.305 239.721 278.393 239.146 278.568C238.584 278.732 238.086 278.92 237.652 279.131C237.23 279.33 236.873 279.518 236.58 279.693C236.299 279.857 236.088 279.939 235.947 279.939C235.854 279.939 235.771 279.916 235.701 279.869C235.631 279.822 235.566 279.752 235.508 279.658C235.461 279.564 235.426 279.447 235.402 279.307C235.379 279.154 235.367 278.99 235.367 278.814C235.367 278.521 235.385 278.293 235.42 278.129C235.467 277.953 235.566 277.789 235.719 277.637C235.883 277.484 236.158 277.309 236.545 277.109C236.932 276.898 237.377 276.711 237.881 276.547C238.385 276.371 238.936 276.23 239.533 276.125C240.131 276.008 240.734 275.949 241.344 275.949C242.48 275.949 243.447 276.078 244.244 276.336C245.041 276.594 245.686 276.975 246.178 277.479C246.67 277.971 247.027 278.586 247.25 279.324C247.473 280.062 247.584 280.924 247.584 281.908V292.578ZM244.701 285.354H242.223C241.426 285.354 240.734 285.424 240.148 285.564C239.562 285.693 239.076 285.893 238.689 286.162C238.303 286.42 238.016 286.736 237.828 287.111C237.652 287.475 237.564 287.896 237.564 288.377C237.564 289.197 237.822 289.854 238.338 290.346C238.865 290.826 239.598 291.066 240.535 291.066C241.297 291.066 242 290.873 242.645 290.486C243.301 290.1 243.986 289.508 244.701 288.711V285.354ZM276.395 292.561C276.395 292.654 276.371 292.736 276.324 292.807C276.277 292.865 276.201 292.918 276.096 292.965C275.99 293.012 275.844 293.047 275.656 293.07C275.469 293.094 275.234 293.105 274.953 293.105C274.66 293.105 274.42 293.094 274.232 293.07C274.045 293.047 273.893 293.012 273.775 292.965C273.67 292.918 273.594 292.865 273.547 292.807C273.5 292.736 273.477 292.654 273.477 292.561V282.945C273.477 282.277 273.418 281.668 273.301 281.117C273.184 280.566 272.996 280.092 272.738 279.693C272.48 279.295 272.152 278.99 271.754 278.779C271.355 278.568 270.887 278.463 270.348 278.463C269.68 278.463 269.006 278.721 268.326 279.236C267.658 279.752 266.92 280.508 266.111 281.504V292.561C266.111 292.654 266.088 292.736 266.041 292.807C265.994 292.865 265.912 292.918 265.795 292.965C265.689 293.012 265.543 293.047 265.355 293.07C265.168 293.094 264.934 293.105 264.652 293.105C264.383 293.105 264.148 293.094 263.949 293.07C263.762 293.047 263.609 293.012 263.492 292.965C263.387 292.918 263.311 292.865 263.264 292.807C263.229 292.736 263.211 292.654 263.211 292.561V282.945C263.211 282.277 263.146 281.668 263.018 281.117C262.889 280.566 262.695 280.092 262.438 279.693C262.18 279.295 261.852 278.99 261.453 278.779C261.066 278.568 260.604 278.463 260.064 278.463C259.396 278.463 258.723 278.721 258.043 279.236C257.363 279.752 256.625 280.508 255.828 281.504V292.561C255.828 292.654 255.805 292.736 255.758 292.807C255.711 292.865 255.635 292.918 255.529 292.965C255.424 293.012 255.277 293.047 255.09 293.07C254.902 293.094 254.662 293.105 254.369 293.105C254.088 293.105 253.854 293.094 253.666 293.07C253.479 293.047 253.326 293.012 253.209 292.965C253.104 292.918 253.027 292.865 252.98 292.807C252.945 292.736 252.928 292.654 252.928 292.561V276.74C252.928 276.646 252.945 276.57 252.98 276.512C253.016 276.441 253.086 276.383 253.191 276.336C253.297 276.277 253.432 276.242 253.596 276.23C253.76 276.207 253.977 276.195 254.246 276.195C254.504 276.195 254.715 276.207 254.879 276.23C255.055 276.242 255.189 276.277 255.283 276.336C255.377 276.383 255.441 276.441 255.477 276.512C255.523 276.57 255.547 276.646 255.547 276.74V278.832C256.438 277.836 257.299 277.109 258.131 276.652C258.975 276.184 259.824 275.949 260.68 275.949C261.336 275.949 261.922 276.025 262.438 276.178C262.965 276.33 263.428 276.547 263.826 276.828C264.225 277.098 264.564 277.426 264.846 277.812C265.127 278.188 265.361 278.609 265.549 279.078C266.076 278.504 266.574 278.018 267.043 277.619C267.523 277.221 267.98 276.898 268.414 276.652C268.859 276.406 269.287 276.23 269.697 276.125C270.119 276.008 270.541 275.949 270.963 275.949C271.982 275.949 272.838 276.131 273.529 276.494C274.221 276.846 274.777 277.32 275.199 277.918C275.633 278.516 275.938 279.219 276.113 280.027C276.301 280.824 276.395 281.668 276.395 282.559V292.561ZM313.309 292.561C313.309 292.654 313.285 292.736 313.238 292.807C313.191 292.865 313.115 292.918 313.01 292.965C312.904 293.012 312.758 293.047 312.57 293.07C312.383 293.094 312.148 293.105 311.867 293.105C311.574 293.105 311.334 293.094 311.146 293.07C310.959 293.047 310.807 293.012 310.689 292.965C310.584 292.918 310.508 292.865 310.461 292.807C310.414 292.736 310.391 292.654 310.391 292.561V282.945C310.391 282.277 310.332 281.668 310.215 281.117C310.098 280.566 309.91 280.092 309.652 279.693C309.395 279.295 309.066 278.99 308.668 278.779C308.27 278.568 307.801 278.463 307.262 278.463C306.594 278.463 305.92 278.721 305.24 279.236C304.572 279.752 303.834 280.508 303.025 281.504V292.561C303.025 292.654 303.002 292.736 302.955 292.807C302.908 292.865 302.826 292.918 302.709 292.965C302.604 293.012 302.457 293.047 302.27 293.07C302.082 293.094 301.848 293.105 301.566 293.105C301.297 293.105 301.062 293.094 300.863 293.07C300.676 293.047 300.523 293.012 300.406 292.965C300.301 292.918 300.225 292.865 300.178 292.807C300.143 292.736 300.125 292.654 300.125 292.561V282.945C300.125 282.277 300.061 281.668 299.932 281.117C299.803 280.566 299.609 280.092 299.352 279.693C299.094 279.295 298.766 278.99 298.367 278.779C297.98 278.568 297.518 278.463 296.979 278.463C296.311 278.463 295.637 278.721 294.957 279.236C294.277 279.752 293.539 280.508 292.742 281.504V292.561C292.742 292.654 292.719 292.736 292.672 292.807C292.625 292.865 292.549 292.918 292.443 292.965C292.338 293.012 292.191 293.047 292.004 293.07C291.816 293.094 291.576 293.105 291.283 293.105C291.002 293.105 290.768 293.094 290.58 293.07C290.393 293.047 290.24 293.012 290.123 292.965C290.018 292.918 289.941 292.865 289.895 292.807C289.859 292.736 289.842 292.654 289.842 292.561V276.74C289.842 276.646 289.859 276.57 289.895 276.512C289.93 276.441 290 276.383 290.105 276.336C290.211 276.277 290.346 276.242 290.51 276.23C290.674 276.207 290.891 276.195 291.16 276.195C291.418 276.195 291.629 276.207 291.793 276.23C291.969 276.242 292.104 276.277 292.197 276.336C292.291 276.383 292.355 276.441 292.391 276.512C292.438 276.57 292.461 276.646 292.461 276.74V278.832C293.352 277.836 294.213 277.109 295.045 276.652C295.889 276.184 296.738 275.949 297.594 275.949C298.25 275.949 298.836 276.025 299.352 276.178C299.879 276.33 300.342 276.547 300.74 276.828C301.139 277.098 301.479 277.426 301.76 277.812C302.041 278.188 302.275 278.609 302.463 279.078C302.99 278.504 303.488 278.018 303.957 277.619C304.438 277.221 304.895 276.898 305.328 276.652C305.773 276.406 306.201 276.23 306.611 276.125C307.033 276.008 307.455 275.949 307.877 275.949C308.896 275.949 309.752 276.131 310.443 276.494C311.135 276.846 311.691 277.32 312.113 277.918C312.547 278.516 312.852 279.219 313.027 280.027C313.215 280.824 313.309 281.668 313.309 282.559V292.561ZM332.1 283.965C332.1 284.422 331.982 284.75 331.748 284.949C331.525 285.137 331.268 285.23 330.975 285.23H320.604C320.604 286.109 320.691 286.9 320.867 287.604C321.043 288.307 321.336 288.91 321.746 289.414C322.156 289.918 322.689 290.305 323.346 290.574C324.002 290.844 324.805 290.979 325.754 290.979C326.504 290.979 327.172 290.92 327.758 290.803C328.344 290.674 328.848 290.533 329.27 290.381C329.703 290.229 330.055 290.094 330.324 289.977C330.605 289.848 330.816 289.783 330.957 289.783C331.039 289.783 331.109 289.807 331.168 289.854C331.238 289.889 331.291 289.947 331.326 290.029C331.361 290.111 331.385 290.229 331.396 290.381C331.42 290.521 331.432 290.697 331.432 290.908C331.432 291.061 331.426 291.195 331.414 291.312C331.402 291.418 331.385 291.518 331.361 291.611C331.35 291.693 331.32 291.77 331.273 291.84C331.238 291.91 331.186 291.98 331.115 292.051C331.057 292.109 330.869 292.215 330.553 292.367C330.236 292.508 329.826 292.648 329.322 292.789C328.818 292.93 328.232 293.053 327.564 293.158C326.908 293.275 326.205 293.334 325.455 293.334C324.154 293.334 323.012 293.152 322.027 292.789C321.055 292.426 320.234 291.887 319.566 291.172C318.898 290.457 318.395 289.561 318.055 288.482C317.715 287.404 317.545 286.15 317.545 284.721C317.545 283.361 317.721 282.143 318.072 281.064C318.424 279.975 318.928 279.055 319.584 278.305C320.252 277.543 321.055 276.963 321.992 276.564C322.93 276.154 323.979 275.949 325.139 275.949C326.381 275.949 327.436 276.148 328.303 276.547C329.182 276.945 329.902 277.484 330.465 278.164C331.027 278.832 331.438 279.623 331.695 280.537C331.965 281.439 332.1 282.406 332.1 283.438V283.965ZM329.182 283.104C329.217 281.58 328.877 280.385 328.162 279.518C327.459 278.65 326.41 278.217 325.016 278.217C324.301 278.217 323.674 278.352 323.135 278.621C322.596 278.891 322.145 279.248 321.781 279.693C321.418 280.139 321.137 280.66 320.938 281.258C320.738 281.844 320.627 282.459 320.604 283.104H329.182ZM359.996 292.561C359.996 292.654 359.973 292.736 359.926 292.807C359.879 292.865 359.803 292.918 359.697 292.965C359.592 293.012 359.445 293.047 359.258 293.07C359.07 293.094 358.836 293.105 358.555 293.105C358.262 293.105 358.021 293.094 357.834 293.07C357.646 293.047 357.494 293.012 357.377 292.965C357.271 292.918 357.195 292.865 357.148 292.807C357.102 292.736 357.078 292.654 357.078 292.561V282.945C357.078 282.277 357.02 281.668 356.902 281.117C356.785 280.566 356.598 280.092 356.34 279.693C356.082 279.295 355.754 278.99 355.355 278.779C354.957 278.568 354.488 278.463 353.949 278.463C353.281 278.463 352.607 278.721 351.928 279.236C351.26 279.752 350.521 280.508 349.713 281.504V292.561C349.713 292.654 349.689 292.736 349.643 292.807C349.596 292.865 349.514 292.918 349.396 292.965C349.291 293.012 349.145 293.047 348.957 293.07C348.77 293.094 348.535 293.105 348.254 293.105C347.984 293.105 347.75 293.094 347.551 293.07C347.363 293.047 347.211 293.012 347.094 292.965C346.988 292.918 346.912 292.865 346.865 292.807C346.83 292.736 346.812 292.654 346.812 292.561V282.945C346.812 282.277 346.748 281.668 346.619 281.117C346.49 280.566 346.297 280.092 346.039 279.693C345.781 279.295 345.453 278.99 345.055 278.779C344.668 278.568 344.205 278.463 343.666 278.463C342.998 278.463 342.324 278.721 341.645 279.236C340.965 279.752 340.227 280.508 339.43 281.504V292.561C339.43 292.654 339.406 292.736 339.359 292.807C339.312 292.865 339.236 292.918 339.131 292.965C339.025 293.012 338.879 293.047 338.691 293.07C338.504 293.094 338.264 293.105 337.971 293.105C337.689 293.105 337.455 293.094 337.268 293.07C337.08 293.047 336.928 293.012 336.811 292.965C336.705 292.918 336.629 292.865 336.582 292.807C336.547 292.736 336.529 292.654 336.529 292.561V276.74C336.529 276.646 336.547 276.57 336.582 276.512C336.617 276.441 336.688 276.383 336.793 276.336C336.898 276.277 337.033 276.242 337.197 276.23C337.361 276.207 337.578 276.195 337.848 276.195C338.105 276.195 338.316 276.207 338.48 276.23C338.656 276.242 338.791 276.277 338.885 276.336C338.979 276.383 339.043 276.441 339.078 276.512C339.125 276.57 339.148 276.646 339.148 276.74V278.832C340.039 277.836 340.9 277.109 341.732 276.652C342.576 276.184 343.426 275.949 344.281 275.949C344.938 275.949 345.523 276.025 346.039 276.178C346.566 276.33 347.029 276.547 347.428 276.828C347.826 277.098 348.166 277.426 348.447 277.812C348.729 278.188 348.963 278.609 349.15 279.078C349.678 278.504 350.176 278.018 350.645 277.619C351.125 277.221 351.582 276.898 352.016 276.652C352.461 276.406 352.889 276.23 353.299 276.125C353.721 276.008 354.143 275.949 354.564 275.949C355.584 275.949 356.439 276.131 357.131 276.494C357.822 276.846 358.379 277.32 358.801 277.918C359.234 278.516 359.539 279.219 359.715 280.027C359.902 280.824 359.996 281.668 359.996 282.559V292.561ZM379.842 284.439C379.842 285.811 379.689 287.047 379.385 288.148C379.092 289.238 378.652 290.17 378.066 290.943C377.492 291.717 376.783 292.309 375.939 292.719C375.096 293.129 374.129 293.334 373.039 293.334C372.535 293.334 372.066 293.281 371.633 293.176C371.211 293.082 370.795 292.924 370.385 292.701C369.975 292.479 369.564 292.197 369.154 291.857C368.744 291.518 368.311 291.107 367.854 290.627V292.561C367.854 292.654 367.83 292.736 367.783 292.807C367.736 292.877 367.66 292.936 367.555 292.982C367.449 293.018 367.314 293.047 367.15 293.07C366.998 293.094 366.799 293.105 366.553 293.105C366.318 293.105 366.119 293.094 365.955 293.07C365.791 293.047 365.656 293.018 365.551 292.982C365.445 292.936 365.375 292.877 365.34 292.807C365.305 292.736 365.287 292.654 365.287 292.561V269.076C365.287 268.982 365.305 268.9 365.34 268.83C365.387 268.76 365.463 268.701 365.568 268.654C365.686 268.607 365.838 268.572 366.025 268.549C366.213 268.525 366.447 268.514 366.729 268.514C367.021 268.514 367.262 268.525 367.449 268.549C367.637 268.572 367.783 268.607 367.889 268.654C367.994 268.701 368.07 268.76 368.117 268.83C368.164 268.9 368.188 268.982 368.188 269.076V278.551C368.656 278.07 369.107 277.666 369.541 277.338C369.986 277.01 370.42 276.746 370.842 276.547C371.264 276.336 371.686 276.184 372.107 276.09C372.529 275.996 372.975 275.949 373.443 275.949C374.592 275.949 375.57 276.178 376.379 276.635C377.199 277.092 377.861 277.707 378.365 278.48C378.881 279.242 379.256 280.139 379.49 281.17C379.725 282.201 379.842 283.291 379.842 284.439ZM376.783 284.773C376.783 283.965 376.719 283.18 376.59 282.418C376.473 281.656 376.262 280.982 375.957 280.396C375.652 279.811 375.248 279.342 374.744 278.99C374.24 278.627 373.613 278.445 372.863 278.445C372.488 278.445 372.119 278.498 371.756 278.604C371.393 278.709 371.023 278.885 370.648 279.131C370.273 279.377 369.881 279.693 369.471 280.08C369.072 280.467 368.645 280.953 368.188 281.539V287.85C368.984 288.822 369.746 289.566 370.473 290.082C371.199 290.586 371.955 290.838 372.74 290.838C373.467 290.838 374.088 290.662 374.604 290.311C375.119 289.959 375.535 289.496 375.852 288.922C376.18 288.336 376.414 287.686 376.555 286.971C376.707 286.244 376.783 285.512 376.783 284.773ZM397.701 283.965C397.701 284.422 397.584 284.75 397.35 284.949C397.127 285.137 396.869 285.23 396.576 285.23H386.205C386.205 286.109 386.293 286.9 386.469 287.604C386.645 288.307 386.938 288.91 387.348 289.414C387.758 289.918 388.291 290.305 388.947 290.574C389.604 290.844 390.406 290.979 391.355 290.979C392.105 290.979 392.773 290.92 393.359 290.803C393.945 290.674 394.449 290.533 394.871 290.381C395.305 290.229 395.656 290.094 395.926 289.977C396.207 289.848 396.418 289.783 396.559 289.783C396.641 289.783 396.711 289.807 396.77 289.854C396.84 289.889 396.893 289.947 396.928 290.029C396.963 290.111 396.986 290.229 396.998 290.381C397.021 290.521 397.033 290.697 397.033 290.908C397.033 291.061 397.027 291.195 397.016 291.312C397.004 291.418 396.986 291.518 396.963 291.611C396.951 291.693 396.922 291.77 396.875 291.84C396.84 291.91 396.787 291.98 396.717 292.051C396.658 292.109 396.471 292.215 396.154 292.367C395.838 292.508 395.428 292.648 394.924 292.789C394.42 292.93 393.834 293.053 393.166 293.158C392.51 293.275 391.807 293.334 391.057 293.334C389.756 293.334 388.613 293.152 387.629 292.789C386.656 292.426 385.836 291.887 385.168 291.172C384.5 290.457 383.996 289.561 383.656 288.482C383.316 287.404 383.146 286.15 383.146 284.721C383.146 283.361 383.322 282.143 383.674 281.064C384.025 279.975 384.529 279.055 385.186 278.305C385.854 277.543 386.656 276.963 387.594 276.564C388.531 276.154 389.58 275.949 390.74 275.949C391.982 275.949 393.037 276.148 393.904 276.547C394.783 276.945 395.504 277.484 396.066 278.164C396.629 278.832 397.039 279.623 397.297 280.537C397.566 281.439 397.701 282.406 397.701 283.438V283.965ZM394.783 283.104C394.818 281.58 394.479 280.385 393.764 279.518C393.061 278.65 392.012 278.217 390.617 278.217C389.902 278.217 389.275 278.352 388.736 278.621C388.197 278.891 387.746 279.248 387.383 279.693C387.02 280.139 386.738 280.66 386.539 281.258C386.34 281.844 386.229 282.459 386.205 283.104H394.783ZM411.377 277.777C411.377 278.035 411.371 278.252 411.359 278.428C411.348 278.604 411.324 278.744 411.289 278.85C411.254 278.943 411.207 279.02 411.148 279.078C411.102 279.125 411.031 279.148 410.938 279.148C410.844 279.148 410.727 279.125 410.586 279.078C410.457 279.02 410.305 278.967 410.129 278.92C409.965 278.861 409.777 278.809 409.566 278.762C409.355 278.715 409.127 278.691 408.881 278.691C408.588 278.691 408.301 278.75 408.02 278.867C407.738 278.984 407.439 279.178 407.123 279.447C406.818 279.717 406.496 280.074 406.156 280.52C405.816 280.965 405.441 281.51 405.031 282.154V292.561C405.031 292.654 405.008 292.736 404.961 292.807C404.914 292.865 404.838 292.918 404.732 292.965C404.627 293.012 404.48 293.047 404.293 293.07C404.105 293.094 403.865 293.105 403.572 293.105C403.291 293.105 403.057 293.094 402.869 293.07C402.682 293.047 402.529 293.012 402.412 292.965C402.307 292.918 402.23 292.865 402.184 292.807C402.148 292.736 402.131 292.654 402.131 292.561V276.74C402.131 276.646 402.148 276.57 402.184 276.512C402.219 276.441 402.289 276.383 402.395 276.336C402.5 276.277 402.635 276.242 402.799 276.23C402.963 276.207 403.18 276.195 403.449 276.195C403.707 276.195 403.918 276.207 404.082 276.23C404.258 276.242 404.393 276.277 404.486 276.336C404.58 276.383 404.645 276.441 404.68 276.512C404.727 276.57 404.75 276.646 404.75 276.74V279.043C405.184 278.41 405.588 277.895 405.963 277.496C406.35 277.098 406.713 276.787 407.053 276.564C407.393 276.33 407.727 276.172 408.055 276.09C408.395 275.996 408.734 275.949 409.074 275.949C409.227 275.949 409.396 275.961 409.584 275.984C409.783 275.996 409.988 276.025 410.199 276.072C410.41 276.119 410.598 276.172 410.762 276.23C410.938 276.289 411.061 276.348 411.131 276.406C411.201 276.465 411.248 276.523 411.271 276.582C411.295 276.629 411.312 276.693 411.324 276.775C411.348 276.857 411.359 276.98 411.359 277.145C411.371 277.297 411.377 277.508 411.377 277.777ZM423.98 288.254C423.98 289.062 423.828 289.783 423.523 290.416C423.23 291.049 422.809 291.582 422.258 292.016C421.707 292.449 421.051 292.777 420.289 293C419.527 293.223 418.689 293.334 417.775 293.334C417.213 293.334 416.674 293.287 416.158 293.193C415.654 293.111 415.197 293.006 414.787 292.877C414.389 292.736 414.049 292.596 413.768 292.455C413.486 292.303 413.281 292.168 413.152 292.051C413.023 291.934 412.93 291.77 412.871 291.559C412.812 291.348 412.783 291.061 412.783 290.697C412.783 290.475 412.795 290.287 412.818 290.135C412.842 289.982 412.871 289.859 412.906 289.766C412.941 289.672 412.988 289.607 413.047 289.572C413.117 289.525 413.193 289.502 413.275 289.502C413.404 289.502 413.592 289.584 413.838 289.748C414.096 289.9 414.406 290.07 414.77 290.258C415.145 290.445 415.584 290.621 416.088 290.785C416.592 290.938 417.172 291.014 417.828 291.014C418.32 291.014 418.766 290.961 419.164 290.855C419.562 290.75 419.908 290.598 420.201 290.398C420.494 290.188 420.717 289.924 420.869 289.607C421.033 289.291 421.115 288.916 421.115 288.482C421.115 288.037 420.998 287.662 420.764 287.357C420.541 287.053 420.242 286.783 419.867 286.549C419.492 286.314 419.07 286.109 418.602 285.934C418.133 285.746 417.646 285.553 417.143 285.354C416.65 285.154 416.164 284.932 415.684 284.686C415.215 284.428 414.793 284.117 414.418 283.754C414.043 283.391 413.738 282.957 413.504 282.453C413.281 281.949 413.17 281.346 413.17 280.643C413.17 280.021 413.287 279.43 413.521 278.867C413.768 278.293 414.131 277.795 414.611 277.373C415.092 276.939 415.689 276.594 416.404 276.336C417.131 276.078 417.975 275.949 418.936 275.949C419.357 275.949 419.779 275.984 420.201 276.055C420.623 276.125 421.004 276.213 421.344 276.318C421.684 276.424 421.971 276.541 422.205 276.67C422.451 276.787 422.633 276.893 422.75 276.986C422.879 277.08 422.961 277.162 422.996 277.232C423.043 277.303 423.072 277.385 423.084 277.479C423.107 277.561 423.125 277.666 423.137 277.795C423.16 277.924 423.172 278.082 423.172 278.27C423.172 278.469 423.16 278.645 423.137 278.797C423.125 278.938 423.096 279.055 423.049 279.148C423.014 279.242 422.967 279.312 422.908 279.359C422.85 279.395 422.785 279.412 422.715 279.412C422.609 279.412 422.457 279.348 422.258 279.219C422.059 279.09 421.801 278.955 421.484 278.814C421.168 278.662 420.793 278.521 420.359 278.393C419.938 278.264 419.451 278.199 418.9 278.199C418.408 278.199 417.975 278.258 417.6 278.375C417.225 278.48 416.914 278.639 416.668 278.85C416.434 279.049 416.252 279.289 416.123 279.57C416.006 279.852 415.947 280.156 415.947 280.484C415.947 280.941 416.064 281.328 416.299 281.645C416.533 281.949 416.838 282.219 417.213 282.453C417.588 282.688 418.016 282.898 418.496 283.086C418.977 283.273 419.463 283.467 419.955 283.666C420.459 283.865 420.951 284.088 421.432 284.334C421.924 284.58 422.357 284.879 422.732 285.23C423.107 285.582 423.406 286.004 423.629 286.496C423.863 286.988 423.98 287.574 423.98 288.254Z"
              fill="var(--primary-color)"
            />
            <path
              d="M307.009 103.516C317.009 103.516 325.124 111.632 325.124 121.631V170.791C325.124 183.149 320.216 195 311.478 203.737C302.74 212.475 290.889 217.384 278.532 217.384C266.175 217.384 254.324 212.475 245.586 203.737C236.848 195 231.939 183.149 231.939 170.791V121.631C231.939 111.632 240.044 103.516 250.054 103.516H307.009ZM228.099 103.516C224.37 108.003 222.127 113.537 221.681 119.354L221.577 121.631V170.791C221.577 179.559 223.565 187.861 227.105 195.273C220.969 196.914 214.538 197.123 208.309 195.882C202.08 194.641 196.22 191.984 191.182 188.117C186.144 184.249 182.063 179.275 179.254 173.578C176.445 167.882 174.985 161.615 174.984 155.264V121.631C174.985 117.085 176.694 112.705 179.774 109.361C182.854 106.016 187.078 103.952 191.609 103.578L193.1 103.516H228.099ZM328.965 103.516H363.902C373.901 103.516 382.017 111.632 382.017 121.631V155.274C382.018 161.622 380.561 167.884 377.756 173.578C374.952 179.272 370.876 184.246 365.843 188.113C360.811 191.981 354.956 194.641 348.732 195.886C342.508 197.131 336.082 196.928 329.948 195.294C333.054 188.793 334.959 181.63 335.383 174.052L335.476 170.791V121.631C335.476 114.748 333.043 108.433 328.965 103.516ZM278.501 31.0547C286.737 31.0547 294.636 34.3265 300.46 40.1505C306.284 45.9744 309.556 53.8733 309.556 62.1096C309.556 70.3459 306.284 78.2448 300.46 84.0687C294.636 89.8926 286.737 93.1645 278.501 93.1645C270.264 93.1645 262.365 89.8926 256.542 84.0687C250.718 78.2448 247.446 70.3459 247.446 62.1096C247.446 53.8733 250.718 45.9744 256.542 40.1505C262.365 34.3265 270.264 31.0547 278.501 31.0547ZM345.786 41.4063C352.65 41.4063 359.232 44.1329 364.086 48.9861C368.939 53.8394 371.665 60.4218 371.665 67.2854C371.665 74.149 368.939 80.7314 364.086 85.5847C359.232 90.4379 352.65 93.1645 345.786 93.1645C338.923 93.1645 332.34 90.4379 327.487 85.5847C322.634 80.7314 319.907 74.149 319.907 67.2854C319.907 60.4218 322.634 53.8394 327.487 48.9861C332.34 44.1329 338.923 41.4063 345.786 41.4063ZM211.215 41.4063C218.079 41.4063 224.661 44.1329 229.514 48.9861C234.368 53.8394 237.094 60.4218 237.094 67.2854C237.094 74.149 234.368 80.7314 229.514 85.5847C224.661 90.4379 218.079 93.1645 211.215 93.1645C204.352 93.1645 197.769 90.4379 192.916 85.5847C188.063 80.7314 185.336 74.149 185.336 67.2854C185.336 60.4218 188.063 53.8394 192.916 48.9861C197.769 44.1329 204.352 41.4063 211.215 41.4063Z"
              fill="var(--primary-color)"
            />
          </svg>
        </div>
        <div
          class="add-icon"
          v-if="getRolePermissions == 'admin' || getRolePermissions == 'own'"
        >
          <v-icon @click="addDialog = true">mdi-plus-circle</v-icon>
        </div>
      </div>
      <div
        class="d-flex justify-space-between align-center mt-7 mb-14"
        v-if="members.length > 0"
      >
        <div>
          <span class="font-14" style="color: var(--primary-color) !important"
            >Showing 1-{{ pagination.footerValue }} of
            {{ pagination.totalCount }} entries</span
          >
        </div>
        <div class="d-flex align-center">
          <span
            class="font-14 mr-5"
            style="color: var(--primary-color) !important"
            >Entries per page:</span
          >
          <v-select
            v-model="pagination.footerValue"
            :items="[8, 16, 32, 64]"
            dense
            class="footer-select"
            hide-details
          >
          </v-select>
          <v-pagination
            v-model="pagination.page"
            :length="pagination.totalPages"
            color="var(--primary-color)"
            @input="fetchdata"
            :total-visible="7"
          ></v-pagination>
        </div>
      </div>
      <div
        class="default-view font-28 font-weight-600"
        style="color: var(--primary-color)"
        v-if="members.length === 0 && search"
      >
        No Records Found
      </div>
    </div>

    <v-dialog v-model="addDialog" persistent max-width="750">
      <v-card class="pa-6 radius-21">
        <addcomponent @close="close" @fetchList="fetchdata" />
      </v-card>
    </v-dialog>
    <v-dialog v-model="editDialog" persistent max-width="750">
      <v-card class="pa-6 radius-21">
        <editcomponent @close="close" :editId="editId" @fetchList="fetchdata" />
      </v-card>
    </v-dialog>
    <v-dialog v-model="detailDialog" persistent max-width="750">
      <v-card class="pa-6 radius-21">
        <detailscomponent @close="close" :detailData="detailData" />
      </v-card>
    </v-dialog>
    <v-dialog v-model="changeRoleDialog" persistent max-width="500">
      <v-card class="pa-6 radius-21">
        <rolecomponent @close="close" :role="roleData" @fetchList="fetchdata" />
      </v-card>
    </v-dialog>
    <v-dialog v-model="deleteDialog" persistent max-width="400">
      <v-card class="pa-6 radius-21">
        <div class="d-flex justify-end">
          <v-icon
            @click="deleteDialog = false"
            color="var(--primary-color)"
            style="font-size: 33px"
            >mdi-close-circle</v-icon
          >
        </div>
        <div class="d-flex justify-center">
          <deletesvgcomponent />
        </div>
        <h3
          style="color: var(--primary-color)"
          class="font-weight-500 text-center"
        >
          Are you sure?
        </h3>
        <h6
          style="color: var(--primary-color)"
          class="text-center font-weight-500"
        >
          Delete this member
        </h6>
        <v-row class="my-4">
          <v-col cols="12" md="6">
            <v-btn
              class="py-6 w-100 radius-25"
              color="var(--primary-color)"
              @click="close()"
              ><span class="text-transform font-18 white--text">Cancel</span>
            </v-btn>
          </v-col>
          <v-col cols="12" md="6">
            <v-btn
              class="py-6 w-100 radius-25"
              color="var(--primary-color)"
              @click="deleteMember()"
              ><span class="text-transform font-18 white--text">Delete</span>
            </v-btn>
          </v-col>
        </v-row>
      </v-card>
    </v-dialog>
  </div>
</template>

<script>
import addcomponent from "@/components/Teams/detail/add.component.vue";
import editcomponent from "@/components/Teams/detail/edit.component.vue";
import rolecomponent from "@/components/Teams/detail/role.component.vue";
import detailscomponent from "@/components/Teams/detail/details.component.vue";
import deletesvgcomponent from "@/components/Deletesvg/delete.component.vue";
import { mapGetters } from "vuex";
export default {
  components: {
    addcomponent,
    rolecomponent,
    editcomponent,
    detailscomponent,
    deletesvgcomponent,
  },
  data() {
    return {
      sortBy: "Ascending",
      loader: false,
      changeRoleDialog: false,
      addDialog: false,
      editDialog: false,
      deleteDialog: false,
      detailDialog: false,
      members: [],
      pagination: {
        page: 1,
        footerValue: 8,
        totalPages: null,
        totalCount: null,
      },
      sorting: {
        sortBy: "Name",
        sortDirection: "Ascending",
      },
      search: "",
      deleteId: null,
      editId: null,
      payload: {},
      roleData: {},
      imageURL: process.env.VUE_APP_IMG_API,
      teamName: "",
      detailData: {},
      carouselKey: 0,
      TeamLeadId: 0,
    };
  },
  computed: {
    ...mapGetters([
      "getTeamMembers",
      "getUserId",
      "getOrganizationId",
      "getRolePermissions",
    ]),
  },
  mounted() {
    this.fetchdata();
  },
  watch: {
    "pagination.footerValue": {
      immediate: true,
      handler(newValue, oldValue) {
        if (this.members.length > 0) {
          if (newValue !== oldValue && this.pagination.page > 1) {
            this.pagination.page = 1;
          }
          this.fetchdata();
        }
      },
    },
    "sorting.sortDirection": {
      immediate: true,
      handler(newValue, oldValue) {
        if (this.members.length > 0 && newValue !== oldValue) this.fetchdata();
      },
    },
    getOrganizationId: {
      immediate: true,
      handler(newValue, oldValue) {
        if (oldValue && oldValue !== newValue) {
          this.$router.push("/team");
        }
      },
    },
    members: {
      immediate: true,
      deep: true,
      handler() {
        this.carouselKey += 1;
      },
    },
  },
  methods: {
    checkIfAdmin(value) {
      let response = value.roles.filter((value) => {
        return value.roleId == "9";
      });
      if (response[0]) {
        return true;
      } else {
        return false;
      }
    },
    checkIfTL(value) {
      return value.id === this.TeamLeadId;
      // let response = value.roles.filter((value) => {
      //   return value.roleId == "8";
      // });
      // if (response[0]) {
      //   return true;
      // } else {
      //   return false;
      // }
    },
    editItem(value) {
      this.editDialog = true;
      this.editId = value.id;
    },
    detailItem(value) {
      this.detailDialog = true;
      this.detailData = value;
    },
    deleteMember() {
      this.loader = true;
      const payload = {
        teamId: this.$route.query.teamId,
        userId: this.deleteId,
      };
      this.$store.dispatch("deleteMember", payload).then((response) => {
        if (response.data.succeeded === true) {
          this.loader = false;
          this.$swal.fire({
            position: "top-end",
            icon: "success",
            title: "Team member deleted successfully",
            showConfirmButton: false,
            timer: 2000,
            toast: true,
          });
          this.close();
          this.fetchdata();
        } else {
          this.loader = false;
          this.$swal.fire({
            position: "top-end",
            icon: "error",
            title: response.data.message,
            showConfirmButton: false,
            timer: 2000,
            toast: true,
          });
        }
      });
    },
    deleteItem(item) {
      this.deleteDialog = true;
      this.deleteId = item.id;
    },
    fetchdata() {
      this.loader = true;
      this.payload = {
        id: this.$route.query.teamId,
        orgId: this.getOrganizationId,
        isPagination: true,
        size: this.pagination.footerValue,
        pageNo: this.pagination.page,
        sortBy: this.sorting.sortBy,
        sortDirection:
          this.sorting.sortDirection === "Ascending" ? "ASC" : "DESC",
      };
      if (this.search) {
        this.payload = {
          search: this.search.trim(),
          orgId: this.getOrganizationId,
          isPagination: false,
          id: this.$route.query.teamId,
          sortBy: this.sorting.sortBy,
          sortDirection:
            this.sorting.sortDirection === "Ascending" ? "ASC" : "DESC",
        };
        if (this.pagination.page > 1) {
          this.pagination.page = 1;
        }
      }
      this.$store.dispatch("getTeamMembers", this.payload).then(() => {
        
        this.loader = false;
        this.TeamLeadId = this.getTeamMembers.data.teamLead;
        this.members =
          this.getTeamMembers.data.teamList ||
          this.getTeamMembers.data.teamData; // one for search and one for overall data
        if (this.members.length === 0 && this.pagination.page > 1) {
          this.pagination.page = 1;
          this.fetchdata();
        }
        this.teamName = this.getTeamMembers.data.teamName;
        this.pagination.totalCount = this.getTeamMembers.totalCounts;
        this.pagination.totalPages = this.search
          ? 1
          : Math.ceil(this.pagination.totalCount / this.pagination.footerValue);
      });
    },
    close() {
      this.addDialog = false;
      this.changeRoleDialog = false;
      this.editDialog = false;
      this.deleteDialog = false;
      this.detailDialog = false;
    },
    handleDots(item) {
      if (item === "Change Role") {
        this.changeRoleDialog = true;
      } else if (item === "Edit") {
        this.editDialog = true;
      } else {
        this.deleteDialog = true;
      }
    },
    changeRole(item) {
      this.changeRoleDialog = true;
      this.roleData = { item: item, roleType: "teamlead" };
    },
  },
};
</script>

<style scoped>
.v-list-item {
  min-height: 30px !important;
}
.v-list >>> .v-list-item--active {
  background-color: var(--secondary-color) !important;
  color: var(--secondary-color) !important;
}
.v-chip {
  position: absolute !important;
  bottom: -13%;
}
.custom-dialog >>> .v-card {
  overflow-y: visible !important;
}
.handler-text-overflow {
  width: 75% !important;
  overflow: hidden !important;
  text-overflow: ellipsis !important;
  white-space: nowrap;
  text-align: center;
}
</style>
