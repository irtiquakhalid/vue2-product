<template>
  <div class="edit-teams">
    <loadercomponent :loader="loader" />
    <div class="d-flex justify-end">
      <v-icon
        @click="close()"
        color="var(--primary-color)"
        style="font-size: 33px"
        >mdi-close-circle</v-icon
      >
    </div>
    <div class="d-flex justify-center">
      <svg
        width="140"
        height="126"
        viewBox="0 0 140 126"
        fill="none"
        xmlns="http://www.w3.org/2000/svg"
      >
        <path
          d="M83.805 37.6781C92.1285 37.6781 98.8762 44.4259 98.8762 52.7494V58.4011C98.8762 61.5223 96.3457 64.0528 93.2245 64.0528H48.0111C44.8897 64.0528 42.3594 61.5223 42.3594 58.4011V52.7494C42.3594 44.4259 49.107 37.6781 57.4305 37.6781H83.805ZM70.6178 0C79.9819 0 87.5728 7.59109 87.5728 16.9552C87.5728 26.3192 79.9819 33.9103 70.6178 33.9103C61.2538 33.9103 53.6627 26.3192 53.6627 16.9552C53.6627 7.59109 61.2538 0 70.6178 0Z"
          fill="var(--primary-color)"
        />
        <path
          d="M34.3976 37.6791C28.1548 37.6791 23.0942 42.7401 23.0942 48.9826V54.6343C23.0942 57.7559 25.6247 60.286 28.7459 60.286H34.3976V52.7496C34.3976 46.5874 37.3561 41.1165 41.9302 37.6791H34.3976ZM38.1654 11.3037C31.9225 11.3037 26.862 16.3644 26.862 22.6071C26.862 28.85 31.9225 33.9106 38.1654 33.9106C44.4082 33.9106 49.4688 28.85 49.4688 22.6071C49.4688 16.3644 44.4082 11.3037 38.1654 11.3037Z"
          fill="var(--primary-color)"
        />
        <path
          d="M105.989 37.6791C112.232 37.6791 117.292 42.7401 117.292 48.9826V54.6343C117.292 57.7559 114.762 60.286 111.641 60.286H105.989V52.7496C105.989 46.5874 103.031 41.1165 98.4566 37.6791H105.989ZM102.221 11.3037C108.464 11.3037 113.525 16.3644 113.525 22.6071C113.525 28.85 108.464 33.9106 102.221 33.9106C95.9785 33.9106 90.918 28.85 90.918 22.6071C90.918 16.3644 95.9785 11.3037 102.221 11.3037Z"
          fill="var(--primary-color)"
        />
        <path
          d="M15.5 112.142C15.5 112.341 15.4889 112.518 15.4668 112.673C15.4447 112.817 15.4059 112.938 15.3506 113.038C15.2952 113.138 15.2288 113.21 15.1514 113.254C15.085 113.298 15.0075 113.32 14.9189 113.32H4.60938C4.35482 113.32 4.11133 113.237 3.87891 113.071C3.65755 112.894 3.54688 112.59 3.54688 112.158V93C3.54688 92.5684 3.65755 92.2695 3.87891 92.1035C4.11133 91.9264 4.35482 91.8379 4.60938 91.8379H14.8027C14.8913 91.8379 14.9688 91.86 15.0352 91.9043C15.1126 91.9486 15.1735 92.0205 15.2178 92.1201C15.262 92.2197 15.2952 92.347 15.3174 92.502C15.3506 92.6458 15.3672 92.8285 15.3672 93.0498C15.3672 93.249 15.3506 93.4261 15.3174 93.5811C15.2952 93.7249 15.262 93.8467 15.2178 93.9463C15.1735 94.0348 15.1126 94.1012 15.0352 94.1455C14.9688 94.1898 14.8913 94.2119 14.8027 94.2119H6.40234V100.952H13.6074C13.696 100.952 13.7734 100.98 13.8398 101.035C13.9173 101.079 13.9782 101.146 14.0225 101.234C14.0778 101.323 14.1165 101.445 14.1387 101.6C14.1608 101.755 14.1719 101.937 14.1719 102.147C14.1719 102.347 14.1608 102.518 14.1387 102.662C14.1165 102.806 14.0778 102.922 14.0225 103.011C13.9782 103.099 13.9173 103.166 13.8398 103.21C13.7734 103.243 13.696 103.26 13.6074 103.26H6.40234V110.946H14.9189C15.0075 110.946 15.085 110.968 15.1514 111.013C15.2288 111.057 15.2952 111.129 15.3506 111.229C15.4059 111.317 15.4447 111.439 15.4668 111.594C15.4889 111.738 15.5 111.92 15.5 112.142ZM32.1348 112.905C32.1348 112.994 32.1126 113.071 32.0684 113.138C32.0352 113.204 31.9688 113.259 31.8691 113.304C31.7806 113.337 31.6589 113.365 31.5039 113.387C31.349 113.409 31.1608 113.42 30.9395 113.42C30.707 113.42 30.5133 113.409 30.3584 113.387C30.2035 113.365 30.0762 113.337 29.9766 113.304C29.877 113.259 29.805 113.204 29.7607 113.138C29.7165 113.071 29.6943 112.994 29.6943 112.905V110.93C28.9085 111.782 28.0895 112.446 27.2373 112.922C26.3962 113.398 25.472 113.636 24.4648 113.636C23.3691 113.636 22.4339 113.425 21.6592 113.005C20.8844 112.573 20.2536 111.998 19.7666 111.278C19.2907 110.548 18.9421 109.696 18.7207 108.722C18.4993 107.737 18.3887 106.702 18.3887 105.617C18.3887 104.333 18.527 103.177 18.8037 102.147C19.0804 101.107 19.4899 100.222 20.0322 99.4912C20.5745 98.7607 21.2441 98.2018 22.041 97.8145C22.849 97.416 23.7786 97.2168 24.8301 97.2168C25.7044 97.2168 26.5013 97.4105 27.2207 97.7979C27.9512 98.1742 28.6706 98.7331 29.3789 99.4746V90.792C29.3789 90.7145 29.3955 90.6426 29.4287 90.5762C29.473 90.4987 29.5505 90.4434 29.6611 90.4102C29.7718 90.3659 29.9102 90.3327 30.0762 90.3105C30.2533 90.2773 30.4746 90.2607 30.7402 90.2607C31.0169 90.2607 31.2438 90.2773 31.4209 90.3105C31.598 90.3327 31.7363 90.3659 31.8359 90.4102C31.9355 90.4434 32.0075 90.4987 32.0518 90.5762C32.1071 90.6426 32.1348 90.7145 32.1348 90.792V112.905ZM29.3789 102.396C28.6374 101.478 27.918 100.781 27.2207 100.305C26.5345 99.8177 25.8151 99.5742 25.0625 99.5742C24.3652 99.5742 23.7731 99.7402 23.2861 100.072C22.7992 100.404 22.4007 100.841 22.0908 101.384C21.792 101.926 21.5706 102.54 21.4268 103.227C21.2939 103.913 21.2275 104.61 21.2275 105.318C21.2275 106.071 21.2829 106.807 21.3936 107.526C21.5153 108.246 21.7201 108.888 22.0078 109.452C22.2956 110.006 22.6774 110.454 23.1533 110.797C23.6292 111.129 24.2269 111.295 24.9463 111.295C25.3115 111.295 25.6602 111.245 25.9922 111.146C26.3353 111.046 26.6839 110.88 27.0381 110.647C27.3923 110.415 27.763 110.116 28.1504 109.751C28.5378 109.375 28.9473 108.915 29.3789 108.373V102.396ZM39.9375 112.905C39.9375 112.994 39.9154 113.071 39.8711 113.138C39.8268 113.193 39.7549 113.243 39.6553 113.287C39.5557 113.331 39.4173 113.365 39.2402 113.387C39.0632 113.409 38.8363 113.42 38.5596 113.42C38.2939 113.42 38.0726 113.409 37.8955 113.387C37.7184 113.365 37.5745 113.331 37.4639 113.287C37.3643 113.243 37.2923 113.193 37.248 113.138C37.2148 113.071 37.1982 112.994 37.1982 112.905V97.9639C37.1982 97.8864 37.2148 97.8145 37.248 97.748C37.2923 97.6816 37.3643 97.6263 37.4639 97.582C37.5745 97.5378 37.7184 97.5046 37.8955 97.4824C38.0726 97.4603 38.2939 97.4492 38.5596 97.4492C38.8363 97.4492 39.0632 97.4603 39.2402 97.4824C39.4173 97.5046 39.5557 97.5378 39.6553 97.582C39.7549 97.6263 39.8268 97.6816 39.8711 97.748C39.9154 97.8145 39.9375 97.8864 39.9375 97.9639V112.905ZM40.2529 92.917C40.2529 93.5589 40.1312 93.9961 39.8877 94.2285C39.6442 94.4609 39.196 94.5771 38.543 94.5771C37.901 94.5771 37.4583 94.4665 37.2148 94.2451C36.9824 94.0127 36.8662 93.5811 36.8662 92.9502C36.8662 92.3083 36.988 91.8711 37.2314 91.6387C37.4749 91.4062 37.9232 91.29 38.5762 91.29C39.2181 91.29 39.6553 91.4062 39.8877 91.6387C40.1312 91.86 40.2529 92.2861 40.2529 92.917ZM52.7705 111.81C52.7705 112.131 52.7484 112.385 52.7041 112.573C52.6598 112.761 52.5934 112.9 52.5049 112.988C52.4163 113.077 52.2835 113.16 52.1064 113.237C51.9294 113.315 51.7246 113.376 51.4922 113.42C51.2708 113.475 51.0329 113.52 50.7783 113.553C50.5238 113.586 50.2692 113.603 50.0146 113.603C49.2399 113.603 48.5758 113.503 48.0225 113.304C47.4691 113.093 47.0153 112.784 46.6611 112.374C46.307 111.953 46.0469 111.428 45.8809 110.797C45.7259 110.155 45.6484 109.402 45.6484 108.539V99.8066H43.5566C43.3906 99.8066 43.2578 99.7181 43.1582 99.541C43.0586 99.3639 43.0088 99.0762 43.0088 98.6777C43.0088 98.4674 43.0199 98.2904 43.042 98.1465C43.0752 98.0026 43.1139 97.8864 43.1582 97.7979C43.2025 97.6982 43.2578 97.6318 43.3242 97.5986C43.4017 97.5544 43.4847 97.5322 43.5732 97.5322H45.6484V93.9795C45.6484 93.902 45.665 93.8301 45.6982 93.7637C45.7425 93.6973 45.8145 93.6419 45.9141 93.5977C46.0247 93.5423 46.1686 93.5036 46.3457 93.4814C46.5228 93.4593 46.7441 93.4482 47.0098 93.4482C47.2865 93.4482 47.5133 93.4593 47.6904 93.4814C47.8675 93.5036 48.0059 93.5423 48.1055 93.5977C48.2051 93.6419 48.277 93.6973 48.3213 93.7637C48.3656 93.8301 48.3877 93.902 48.3877 93.9795V97.5322H52.2227C52.3112 97.5322 52.3887 97.5544 52.4551 97.5986C52.5215 97.6318 52.5768 97.6982 52.6211 97.7979C52.6764 97.8864 52.7152 98.0026 52.7373 98.1465C52.7594 98.2904 52.7705 98.4674 52.7705 98.6777C52.7705 99.0762 52.7207 99.3639 52.6211 99.541C52.5215 99.7181 52.3887 99.8066 52.2227 99.8066H48.3877V108.141C48.3877 109.17 48.5371 109.95 48.8359 110.481C49.1458 111.002 49.6937 111.262 50.4795 111.262C50.734 111.262 50.9609 111.24 51.1602 111.195C51.3594 111.14 51.5365 111.085 51.6914 111.029C51.8464 110.974 51.9792 110.924 52.0898 110.88C52.2005 110.825 52.3001 110.797 52.3887 110.797C52.444 110.797 52.4938 110.813 52.5381 110.847C52.5934 110.869 52.6322 110.919 52.6543 110.996C52.6875 111.074 52.7152 111.179 52.7373 111.312C52.7594 111.444 52.7705 111.61 52.7705 111.81ZM77.8721 93.0664C77.8721 93.2767 77.861 93.4593 77.8389 93.6143C77.8167 93.7692 77.778 93.8965 77.7227 93.9961C77.6784 94.0846 77.6175 94.151 77.54 94.1953C77.4736 94.2396 77.3962 94.2617 77.3076 94.2617H71.2646V112.889C71.2646 112.977 71.2425 113.055 71.1982 113.121C71.154 113.188 71.0765 113.243 70.9658 113.287C70.8551 113.32 70.7057 113.348 70.5176 113.37C70.3405 113.403 70.1136 113.42 69.8369 113.42C69.5713 113.42 69.3444 113.403 69.1562 113.37C68.9681 113.348 68.8187 113.32 68.708 113.287C68.5973 113.243 68.5199 113.188 68.4756 113.121C68.4313 113.055 68.4092 112.977 68.4092 112.889V94.2617H62.3662C62.2777 94.2617 62.1947 94.2396 62.1172 94.1953C62.0508 94.151 61.9954 94.0846 61.9512 93.9961C61.9069 93.8965 61.8682 93.7692 61.835 93.6143C61.8128 93.4593 61.8018 93.2767 61.8018 93.0664C61.8018 92.8561 61.8128 92.6735 61.835 92.5186C61.8682 92.3525 61.9069 92.2197 61.9512 92.1201C61.9954 92.0205 62.0508 91.9486 62.1172 91.9043C62.1947 91.86 62.2777 91.8379 62.3662 91.8379H77.3076C77.3962 91.8379 77.4736 91.86 77.54 91.9043C77.6175 91.9486 77.6784 92.0205 77.7227 92.1201C77.778 92.2197 77.8167 92.3525 77.8389 92.5186C77.861 92.6735 77.8721 92.8561 77.8721 93.0664ZM90.3896 104.787C90.3896 105.219 90.279 105.529 90.0576 105.717C89.8473 105.894 89.6038 105.982 89.3271 105.982H79.5322C79.5322 106.812 79.6152 107.56 79.7812 108.224C79.9473 108.888 80.224 109.458 80.6113 109.934C80.9987 110.41 81.5023 110.775 82.1221 111.029C82.7419 111.284 83.5 111.411 84.3965 111.411C85.1048 111.411 85.7357 111.356 86.2891 111.245C86.8424 111.123 87.3184 110.991 87.7168 110.847C88.1263 110.703 88.4583 110.576 88.7129 110.465C88.9785 110.343 89.1777 110.282 89.3105 110.282C89.388 110.282 89.4544 110.304 89.5098 110.349C89.5762 110.382 89.626 110.437 89.6592 110.515C89.6924 110.592 89.7145 110.703 89.7256 110.847C89.7477 110.979 89.7588 111.146 89.7588 111.345C89.7588 111.489 89.7533 111.616 89.7422 111.727C89.7311 111.826 89.7145 111.92 89.6924 112.009C89.6813 112.086 89.6536 112.158 89.6094 112.225C89.5762 112.291 89.5264 112.357 89.46 112.424C89.4046 112.479 89.2275 112.579 88.9287 112.723C88.6299 112.855 88.2425 112.988 87.7666 113.121C87.2907 113.254 86.7373 113.37 86.1064 113.47C85.4867 113.58 84.8226 113.636 84.1143 113.636C82.8857 113.636 81.8066 113.464 80.877 113.121C79.9583 112.778 79.1836 112.269 78.5527 111.594C77.9219 110.919 77.446 110.072 77.125 109.054C76.804 108.035 76.6436 106.851 76.6436 105.501C76.6436 104.217 76.8096 103.066 77.1416 102.048C77.4736 101.019 77.9495 100.15 78.5693 99.4414C79.2002 98.722 79.9583 98.1742 80.8438 97.7979C81.7292 97.4105 82.7197 97.2168 83.8154 97.2168C84.9886 97.2168 85.9847 97.4049 86.8037 97.7812C87.6338 98.1576 88.3145 98.6667 88.8457 99.3086C89.377 99.9395 89.7643 100.687 90.0078 101.55C90.2624 102.402 90.3896 103.315 90.3896 104.289V104.787ZM87.6338 103.974C87.667 102.535 87.346 101.406 86.6709 100.587C86.0068 99.7679 85.0163 99.3584 83.6992 99.3584C83.0241 99.3584 82.432 99.4857 81.9229 99.7402C81.4137 99.9948 80.9876 100.332 80.6445 100.753C80.3014 101.174 80.0358 101.666 79.8477 102.23C79.6595 102.784 79.5544 103.365 79.5322 103.974H87.6338ZM105.829 112.922C105.829 113.055 105.785 113.154 105.696 113.221C105.608 113.287 105.486 113.337 105.331 113.37C105.176 113.403 104.949 113.42 104.65 113.42C104.363 113.42 104.13 113.403 103.953 113.37C103.787 113.337 103.665 113.287 103.588 113.221C103.51 113.154 103.472 113.055 103.472 112.922V111.428C102.819 112.125 102.088 112.667 101.28 113.055C100.483 113.442 99.6367 113.636 98.7402 113.636C97.9544 113.636 97.2406 113.531 96.5986 113.32C95.9678 113.121 95.4255 112.828 94.9717 112.44C94.529 112.053 94.1803 111.577 93.9258 111.013C93.6823 110.448 93.5605 109.806 93.5605 109.087C93.5605 108.246 93.7321 107.515 94.0752 106.896C94.4183 106.276 94.9108 105.761 95.5527 105.352C96.1947 104.942 96.9805 104.638 97.9102 104.438C98.8398 104.228 99.8857 104.123 101.048 104.123H103.106V102.961C103.106 102.385 103.046 101.876 102.924 101.434C102.802 100.991 102.603 100.626 102.326 100.338C102.061 100.039 101.712 99.8177 101.28 99.6738C100.849 99.5189 100.317 99.4414 99.6865 99.4414C99.0114 99.4414 98.4027 99.5244 97.8604 99.6904C97.3291 99.8454 96.8587 100.022 96.4492 100.222C96.0508 100.41 95.7132 100.587 95.4365 100.753C95.1709 100.908 94.9717 100.985 94.8389 100.985C94.7503 100.985 94.6729 100.963 94.6064 100.919C94.54 100.875 94.4792 100.808 94.4238 100.72C94.3796 100.631 94.3464 100.521 94.3242 100.388C94.3021 100.244 94.291 100.089 94.291 99.9229C94.291 99.6462 94.3076 99.4303 94.3408 99.2754C94.3851 99.1094 94.4792 98.9544 94.623 98.8105C94.778 98.6667 95.0381 98.5007 95.4033 98.3125C95.7686 98.1133 96.1891 97.9362 96.665 97.7812C97.141 97.6152 97.6611 97.4824 98.2256 97.3828C98.79 97.2721 99.36 97.2168 99.9355 97.2168C101.009 97.2168 101.922 97.3385 102.675 97.582C103.427 97.8255 104.036 98.1852 104.501 98.6611C104.966 99.126 105.303 99.707 105.514 100.404C105.724 101.102 105.829 101.915 105.829 102.845V112.922ZM103.106 106.099H100.766C100.013 106.099 99.36 106.165 98.8066 106.298C98.2533 106.42 97.7939 106.608 97.4287 106.862C97.0635 107.106 96.7923 107.405 96.6152 107.759C96.4492 108.102 96.3662 108.5 96.3662 108.954C96.3662 109.729 96.6097 110.349 97.0967 110.813C97.5947 111.267 98.2865 111.494 99.1719 111.494C99.8913 111.494 100.555 111.312 101.164 110.946C101.784 110.581 102.431 110.022 103.106 109.27V106.099ZM133.039 112.905C133.039 112.994 133.017 113.071 132.973 113.138C132.928 113.193 132.856 113.243 132.757 113.287C132.657 113.331 132.519 113.365 132.342 113.387C132.165 113.409 131.943 113.42 131.678 113.42C131.401 113.42 131.174 113.409 130.997 113.387C130.82 113.365 130.676 113.331 130.565 113.287C130.466 113.243 130.394 113.193 130.35 113.138C130.305 113.071 130.283 112.994 130.283 112.905V103.824C130.283 103.193 130.228 102.618 130.117 102.098C130.007 101.577 129.829 101.129 129.586 100.753C129.342 100.377 129.033 100.089 128.656 99.8896C128.28 99.6904 127.837 99.5908 127.328 99.5908C126.697 99.5908 126.061 99.8343 125.419 100.321C124.788 100.808 124.091 101.522 123.327 102.463V112.905C123.327 112.994 123.305 113.071 123.261 113.138C123.216 113.193 123.139 113.243 123.028 113.287C122.929 113.331 122.79 113.365 122.613 113.387C122.436 113.409 122.215 113.42 121.949 113.42C121.695 113.42 121.473 113.409 121.285 113.387C121.108 113.365 120.964 113.331 120.854 113.287C120.754 113.243 120.682 113.193 120.638 113.138C120.604 113.071 120.588 112.994 120.588 112.905V103.824C120.588 103.193 120.527 102.618 120.405 102.098C120.284 101.577 120.101 101.129 119.857 100.753C119.614 100.377 119.304 100.089 118.928 99.8896C118.562 99.6904 118.125 99.5908 117.616 99.5908C116.985 99.5908 116.349 99.8343 115.707 100.321C115.065 100.808 114.368 101.522 113.615 102.463V112.905C113.615 112.994 113.593 113.071 113.549 113.138C113.505 113.193 113.433 113.243 113.333 113.287C113.233 113.331 113.095 113.365 112.918 113.387C112.741 113.409 112.514 113.42 112.237 113.42C111.972 113.42 111.75 113.409 111.573 113.387C111.396 113.365 111.252 113.331 111.142 113.287C111.042 113.243 110.97 113.193 110.926 113.138C110.893 113.071 110.876 112.994 110.876 112.905V97.9639C110.876 97.8753 110.893 97.8034 110.926 97.748C110.959 97.6816 111.025 97.6263 111.125 97.582C111.225 97.5267 111.352 97.4935 111.507 97.4824C111.662 97.4603 111.867 97.4492 112.121 97.4492C112.365 97.4492 112.564 97.4603 112.719 97.4824C112.885 97.4935 113.012 97.5267 113.101 97.582C113.189 97.6263 113.25 97.6816 113.283 97.748C113.327 97.8034 113.35 97.8753 113.35 97.9639V99.9395C114.191 98.9987 115.004 98.3125 115.79 97.8809C116.587 97.4382 117.389 97.2168 118.197 97.2168C118.817 97.2168 119.37 97.2887 119.857 97.4326C120.355 97.5765 120.793 97.7812 121.169 98.0469C121.545 98.3014 121.866 98.6113 122.132 98.9766C122.397 99.3307 122.619 99.7292 122.796 100.172C123.294 99.6296 123.764 99.1702 124.207 98.7939C124.661 98.4176 125.092 98.1133 125.502 97.8809C125.923 97.6484 126.326 97.4824 126.714 97.3828C127.112 97.2721 127.511 97.2168 127.909 97.2168C128.872 97.2168 129.68 97.3883 130.333 97.7314C130.986 98.0635 131.512 98.5117 131.91 99.0762C132.32 99.6406 132.607 100.305 132.773 101.068C132.951 101.821 133.039 102.618 133.039 103.459V112.905Z"
          fill="var(--primary-color)"
        />
      </svg>
    </div>
    <div class="px-8 mt-6">
      <v-text-field
        solo
        flat
        background-color="var(--secondary-color)"
        class="radius-7"
        placeholder="Team Name"
        v-model="form.teamName"
        hide-details
      ></v-text-field>
      <div class="red--text" v-if="$v.form.teamName.$error">
        <div class="red--text" v-if="!$v.form.teamName.required">
          Team name is required
        </div>
      </div>
      <h5 style="color: var(--primary-color);" class="font-weight-500 mt-5">Team Picture/Logo</h5>
      <div class="attach-document">
        <v-img
          v-if="form.teamLogo || newImage"
          :src="newImage ? newImage : `${imageURL}${form.teamLogo}`"
          :max-width="200"
          max-height="120px"
          contain
        ></v-img>
        <svg
          width="75"
          height="76"
          viewBox="0 0 75 76"
          fill="none"
          xmlns="http://www.w3.org/2000/svg"
          v-else
        >
          <path
            d="M49.3114 52.0792C47.2157 51.3103 44.1597 49.0647 44.1597 47.6668C44.1597 46.7406 44.1597 45.5836 44.1597 43.9977C45.3708 42.6754 46.2917 39.9908 46.8391 36.9477C48.1157 36.5004 48.8453 35.7846 49.7566 32.6527C50.7254 29.3165 48.2978 29.4299 48.2978 29.4299C50.2613 23.0508 47.6766 17.0555 43.347 17.4957C40.3606 12.3684 30.3581 18.6669 27.2241 18.2279C27.2241 19.9863 27.9702 21.3046 27.9702 21.3046C26.8807 23.3347 27.301 27.3826 27.6069 29.4299C27.43 29.4268 25.2346 29.4493 26.1658 32.6527C27.0773 35.7845 27.8067 36.5004 29.0835 36.9477C29.6298 39.9908 30.5506 42.6754 31.7629 43.9977C31.7629 45.5836 31.7629 46.7406 31.7629 47.6668C31.7629 49.0647 28.5165 51.4196 26.6113 52.0792C22.6749 53.4394 13.0022 57.3514 13.6265 64.6792C13.7762 66.4377 23.6291 72.9999 37.9613 72.9999C52.2926 72.9999 62.1463 66.4377 62.2962 64.6792C62.9204 57.3443 53.2228 53.515 49.3114 52.0792Z"
            fill="var(--primary-color)"
          />
          <circle
            cx="37.2846"
            cy="37.8081"
            r="34.5152"
            stroke="var(--primary-color)"
            stroke-width="5.41414"
          />
        </svg>
        <div class="select-input">
          <input
            type="file"
            ref="fileInput"
            @change="handleImage"
            accept="image/png, image/jpeg, image/bmp"
            :title="form?.teamLogo"
          />
        </div>
      </div>

      <v-row class="mt-8">
        <v-col>
          <v-btn
            class="w-100 py-6 radius-25 mb-5"
            color="var(--primary-color)"
            depressed
            @click="saveChanges()"
          >
            <span class="text-transform white--text font-18">Save Changes</span>
          </v-btn>
        </v-col>
      </v-row>
    </div>
  </div>
</template>

<script>
import { required } from "vuelidate/lib/validators";
import { mapGetters } from "vuex";

export default {
  data() {
    return {
      form: {
        teamName: "",
      },
      imageURL: process.env.VUE_APP_IMG_API,
      newImage: "",
      loader: false,
    };
  },
  validations: {
    form: {
      teamName: {
        required,
      },
    },
  },
  props: ["editId"],
  computed: {
    ...mapGetters(["getUserId", "getTeamsListByBroker", "getOrganizationId"]),
  },
  mounted() {
    this.fetchdata();
  },
  watch: {
    editId: {
      immediate: true,
      handler() {
        if (this.form.id) {
          this.fetchdata();
        }
      },
    },
  },
  methods: {
    resetData() {
      const fileInput = this.$el.querySelector('input[type="file"]');
      if (fileInput) {
        fileInput.value = "";
      }
      this.newImage = "";
      this.form.teamLogo = "";
    },
    fetchList() {
      this.$emit("fetchList");
    },
    saveChanges() {
      if (this.$v.$invalid) {
        this.$v.$touch();
      } else {
        this.loader = true;
        const payload = {
          Id: this.form.id,
          TeamName: this.form.teamName,
          TeamLogoPath: this.form.teamLogo,
          CreatedById: this.form.createdById,
          OrgId: this.form.organizationId,
          TeamLeadId: this.form.teamLeadId,
        };
        this.$store.dispatch("createTeam", payload).then((response) => {
          if (response.data.succeeded === true) {
            this.loader = false;
            this.$swal.fire({
              position: "top-end",
              icon: "success",
              title: "Team updated successfully",
              showConfirmButton: false,
              timer: 2000,
              toast: true,
            });
            this.close();
            this.fetchList();
          } else {
            this.loader = false;
            this.$swal.fire({
              position: "top-end",
              icon: "error",
              title: response.data.message,
              showConfirmButton: false,
              timer: 2000,
              toast: true,
            });
          }
        });
      }
    },
    handleImage(event) {
      const file = event.target.files[0];
      const reader = new FileReader();
      if (file) {
        // Update teamLogo with the file object itself or a URL if needed
        this.form.teamLogo = file;

        reader.onload = (e) => {
          this.newImage = e.target.result;
        };

        // Read the file as a data URL
        reader.readAsDataURL(file);
      }
    },
    fetchdata() {
      this.loader = true;
      const payload = {
        id: this.editId,
        orgId: this.getOrganizationId,
      };
      this.$store.dispatch("getTeamsListByBroker", payload).then(() => {
        this.loader = false;
        this.form = this.getTeamsListByBroker.data.data.teamList[0];
      });
    },
    close() {
      this.resetData();
      this.$emit("close");
      this.$v.$reset();
      this.fetchdata();
    },
  },
};
</script>

<style></style>
